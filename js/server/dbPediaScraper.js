// Generated by CoffeeScript 1.4.0
(function() {
  var isPerson, models, request;

  request = require('request');

  models = require('./models');

  isPerson = function(data) {
    return data;
  };

  exports.getJSON = function(wikipage, callBack) {
    var options;
    options = {
      url: "http://dbpedia.org/resource/" + wikipage,
      headers: {
        "Accept": "application/json"
      }
    };
    return request(options, function(err, res, body) {
      var data, newPerson;
      if (err) {
        console.log("Error:", err);
      }
      data = JSON.parse(body);
      if (isPerson(data)) {
        newPerson = models.makePerson(wikipage, data["http://dbpedia.org/resource/" + wikipage]["http://dbpedia.org/ontology/birthDate"][0].value, "http://en.wikipedia.org/" + wikipage);
        return callBack(true, JSON.stringify(newPerson));
      } else {
        return callBack(false);
      }
    });
  };

}).call(this);
