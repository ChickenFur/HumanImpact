// Generated by CoffeeScript 1.4.0
(function() {
  var personTest;

  personTest = null;

  $(document).ready(function() {
    $('.nameInput').on("keyup", function(event) {
      var settings;
      if (event.keyCode === 13) {
        settings = {
          url: "/dbpedia/?wikipage=" + event.target.value,
          dataType: "json",
          success: function(data) {
            if (data.name) {
              personTest = data;
              $(".result").html("");
              return $(".result").append("<p>Person Name: " + personTest.name + "<br>Date of Birth: " + personTest.dob + "<br>URL: " + personTest.url + "<br>Relations: " + personTest.relations + "</p>");
            } else {
              return $(".result").append("<p>Not a Person</p>");
            }
          },
          error: function(err) {
            return console.log("Error:", err);
          }
        };
        return $.ajax(settings);
      }
    });
    return $('#checkWiki').on("click", function(event) {
      var settings;
      settings = {
        url: "http://en.wikipedia.org/w/api.php?" + "format=json&" + "action=query&" + ("titles=" + ($(".nameInput").val()) + "&") + "pllimit=300&" + "prop=links",
        dataType: "jsonp",
        success: function(data) {
          debugger;
          var allLinks, eachLink, i, pageId, _i, _ref, _results;
          $(".allLinks").html("");
          pageId = Object.keys(data.query.pages);
          allLinks = data.query.pages[pageId].links;
          _results = [];
          for (i = _i = 0, _ref = allLinks.length; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
            eachLink = data.query.pages[pageId].links[i].title;
            eachLink = eachLink.replace(/\s/g, "_");
            console.log(eachLink);
            _results.push($(".allLinks").append(eachLink));
          }
          return _results;
        },
        error: function(err) {
          return console.log("Error with Wikipedia: ", err);
        }
      };
      return $.ajax(settings);
    });
  });

}).call(this);
